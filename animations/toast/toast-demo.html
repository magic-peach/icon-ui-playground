<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Toast Notification</title>

  <link rel="stylesheet" href="../../css/animation-theme.css">
  <link rel="stylesheet" href="../../css/accessibility.css">
  <link rel="stylesheet" href="../../css/animations.css">
  
  <style>
    .toast-preview-box {
      position: relative;
      width: 100%;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    
    /* The Toast Card Appearance */
    .toast-preview-box .toast-preview {
      position: absolute;
      min-width: auto;
      white-space: nowrap;
      padding: 0.8rem 1.2rem;
      
      /* Theme Variables from animation-theme.css */
      background: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
      
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      font-size: 0.9rem;
      font-weight: 500;
      
      /* Entry and Exit Animations */
      animation: slideInBottom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards,
                 fadeOut 0.5s ease 2.5s forwards;
    }

    /* Keyframes */
    @keyframes slideInBottom {
      from { transform: translateY(100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes fadeOut {
      to { opacity: 0; transform: translateX(20px); }
    }
  </style>
</head>

<body>

  <section class="component-wrapper">
    <h3>Toast Notification</h3>

    <div class="preview">
      <div class="toast-preview-box" id="demo-container"></div>
    </div>

    <details>
      <summary>Show Code</summary>

      <div class="code-block">
        <h4>HTML</h4>
        <div class="preview">
            <div class="toast-preview-box">
                <div class="toast-preview" style="animation: none;">
                    ✔ Notification
                </div>
            </div>
          </div>

        <h4>CSS</h4>
        <pre><code>
.toast-container {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 9999;
}

.toast {
  background: var(--card-bg);
  color: var(--text-color);
  padding: 1rem 1.5rem;
  border-radius: 8px;
  animation: slideInBottom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards,
             fadeOut 0.5s ease 2.5s forwards;
}

@keyframes slideInBottom {
    from { transform: translateY(100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  @keyframes fadeOut {
    to { opacity: 0; transform: translateX(20px); }
  }
        </code></pre>
      </div>
    </details>
  </section>

  <script>
    // 1. Theme Sync
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
      document.body.classList.add("dark");
    }

    // 2. Automatic Preview Loop
    const container = document.getElementById('demo-container');

    function createDemoToast() {
        const toast = document.createElement('div');
        toast.className = 'toast-preview';
        toast.innerHTML = '✔ Notification';
        
        container.appendChild(toast);

        // Remove from DOM after animation completes (3s total)
        setTimeout(() => {
            toast.remove();
        }, 3000);
    }

    function startLoop() {
        createDemoToast();
        // Trigger the next one every 3.5 seconds
        setTimeout(startLoop, 3500); 
    }

    // Start the animation loop immediately
    startLoop();
  </script>

</body>
</html>